{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/lib/format.ts"],"sourcesContent":["export function formatDateShort(date: Date) {\n  return new Intl.DateTimeFormat(\"en-GB\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"2-digit\",\n  }).format(date);\n}\n\nexport function formatBytes(bytes: number) {\n  if (bytes < 1024) {\n    return `${bytes} B`;\n  }\n  const units = [\"KB\", \"MB\", \"GB\"];\n  let size = bytes / 1024;\n  let unitIndex = 0;\n  while (size >= 1024 && unitIndex < units.length - 1) {\n    size /= 1024;\n    unitIndex += 1;\n  }\n  return `${size.toFixed(size >= 10 ? 0 : 1)} ${units[unitIndex]}`;\n}\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,gBAAgB,IAAU;IACxC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,YAAY,KAAa;IACvC,IAAI,QAAQ,MAAM;QAChB,OAAO,GAAG,MAAM,EAAE,CAAC;IACrB;IACA,MAAM,QAAQ;QAAC;QAAM;QAAM;KAAK;IAChC,IAAI,OAAO,QAAQ;IACnB,IAAI,YAAY;IAChB,MAAO,QAAQ,QAAQ,YAAY,MAAM,MAAM,GAAG,EAAG;QACnD,QAAQ;QACR,aAAa;IACf;IACA,OAAO,GAAG,KAAK,OAAO,CAAC,QAAQ,KAAK,IAAI,GAAG,CAAC,EAAE,KAAK,CAAC,UAAU,EAAE;AAClE"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/lib/notifications.ts"],"sourcesContent":["import type { UserRole } from \"@prisma/client\";\nimport { prisma } from \"@/lib/prisma\";\n\ntype NotificationPayload = {\n  orgId: string;\n  recipientUserId?: string;\n  recipientRoles?: UserRole[];\n  recipientOrgId?: string;\n  type: string;\n  title: string;\n  body: string;\n  entityType?: string;\n  entityId?: string;\n};\n\nexport async function createNotifications({\n  orgId,\n  recipientUserId,\n  recipientRoles,\n  recipientOrgId,\n  type,\n  title,\n  body,\n  entityType,\n  entityId,\n}: NotificationPayload) {\n  if (recipientUserId) {\n    await prisma.notification.create({\n      data: {\n        orgId,\n        recipientUserId,\n        type,\n        title,\n        body,\n        entityType,\n        entityId,\n      },\n    });\n    return;\n  }\n\n  if (!recipientRoles || recipientRoles.length === 0) {\n    return;\n  }\n\n  const users = await prisma.user.findMany({\n    where: {\n      role: { in: recipientRoles },\n      ...(recipientOrgId ? { orgId: recipientOrgId } : {}),\n    },\n    select: { id: true },\n  });\n\n  if (users.length === 0) {\n    return;\n  }\n\n  await prisma.notification.createMany({\n    data: users.map((user) => ({\n      orgId,\n      recipientUserId: user.id,\n      type,\n      title,\n      body,\n      entityType,\n      entityId,\n    })),\n  });\n}\n"],"names":[],"mappings":";;;;AACA;;AAcO,eAAe,oBAAoB,EACxC,KAAK,EACL,eAAe,EACf,cAAc,EACd,cAAc,EACd,IAAI,EACJ,KAAK,EACL,IAAI,EACJ,UAAU,EACV,QAAQ,EACY;IACpB,IAAI,iBAAiB;QACnB,MAAM,uHAAM,CAAC,YAAY,CAAC,MAAM,CAAC;YAC/B,MAAM;gBACJ;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;YACF;QACF;QACA;IACF;IAEA,IAAI,CAAC,kBAAkB,eAAe,MAAM,KAAK,GAAG;QAClD;IACF;IAEA,MAAM,QAAQ,MAAM,uHAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACvC,OAAO;YACL,MAAM;gBAAE,IAAI;YAAe;YAC3B,GAAI,iBAAiB;gBAAE,OAAO;YAAe,IAAI,CAAC,CAAC;QACrD;QACA,QAAQ;YAAE,IAAI;QAAK;IACrB;IAEA,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB;IACF;IAEA,MAAM,uHAAM,CAAC,YAAY,CAAC,UAAU,CAAC;QACnC,MAAM,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;gBACzB;gBACA,iBAAiB,KAAK,EAAE;gBACxB;gBACA;gBACA;gBACA;gBACA;YACF,CAAC;IACH;AACF"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/icons/iconMap.ts"],"sourcesContent":["import type { LucideIcon } from \"lucide-react\";\nimport {\n  Activity,\n  AlertTriangle,\n  Aperture,\n  Archive,\n  ArrowUpDown,\n  ArrowUpRight,\n  BadgeCheck,\n  Bell,\n  BookOpen,\n  Boxes,\n  Brain,\n  Building2,\n  CalendarClock,\n  Check,\n  CheckCircle2,\n  ChevronDown,\n  ChevronRight,\n  ClipboardList,\n  ClipboardSignature,\n  Database,\n  Download,\n  DraftingCompass,\n  Euro,\n  Factory,\n  FileDown,\n  FileSearch,\n  FileText,\n  Flame,\n  FolderKanban,\n  Gauge,\n  Gavel,\n  GitPullRequest,\n  Hammer,\n  HelpCircle,\n  History,\n  Home,\n  Inbox,\n  Info,\n  KeyRound,\n  LayoutDashboard,\n  LifeBuoy,\n  ListChecks,\n  Lock,\n  LogIn,\n  LogOut,\n  Mail,\n  MapPin,\n  Menu,\n  Monitor,\n  Network,\n  Package,\n  Pencil,\n  Plug,\n  Receipt,\n  Repeat2,\n  Route,\n  Scale,\n  Search,\n  Settings,\n  Shield,\n  ShieldCheck,\n  ShoppingBag,\n  SlidersHorizontal,\n  Sparkles,\n  Target,\n  Timer,\n  Truck,\n  Unlock,\n  Upload,\n  Users,\n  WalletCards,\n  Wrench,\n  X,\n  XCircle,\n} from \"lucide-react\";\n\nexport const iconMap = {\n  brand: Aperture,\n  home: Home,\n  marketplace: ShoppingBag,\n  how: Route,\n  security: Shield,\n  about: Info,\n  insights: BookOpen,\n  legal: Scale,\n  contact: Mail,\n  requestScope: ClipboardList,\n  login: LogIn,\n  logout: LogOut,\n  external: ArrowUpRight,\n  chevronRight: ChevronRight,\n  chevronDown: ChevronDown,\n  search: Search,\n  filter: SlidersHorizontal,\n  sort: ArrowUpDown,\n  close: X,\n  menu: Menu,\n  ai: Brain,\n  industrial: Factory,\n  itot: Network,\n  risk: AlertTriangle,\n  governance: Gavel,\n  architecture: Boxes,\n  integration: Plug,\n  data: Database,\n  realtime: Timer,\n  observability: Activity,\n  performance: Gauge,\n  delivery: Truck,\n  resilience: LifeBuoy,\n  controls: Lock,\n  compliance: BadgeCheck,\n  audit: FileSearch,\n  design: DraftingCompass,\n  build: Hammer,\n  operate: Wrench,\n  fit: Target,\n  outcomes: Sparkles,\n  deliverables: Package,\n  definitionDone: CheckCircle2,\n  process: ListChecks,\n  inputs: KeyRound,\n  pricing: Euro,\n  duration: CalendarClock,\n  onsite: MapPin,\n  remote: Monitor,\n  hybrid: Repeat2,\n  faq: HelpCircle,\n  dashboard: LayoutDashboard,\n  engagements: FolderKanban,\n  inquiries: Inbox,\n  documents: FileText,\n  scopes: ClipboardSignature,\n  changeRequests: GitPullRequest,\n  billing: Receipt,\n  finance: WalletCards,\n  notifications: Bell,\n  admin: ShieldCheck,\n  users: Users,\n  orgs: Building2,\n  settings: Settings,\n  timeline: History,\n  edit: Pencil,\n  approve: Check,\n  reject: XCircle,\n  archive: Archive,\n  download: Download,\n  upload: Upload,\n  danger: Flame,\n  export: FileDown,\n  locked: Lock,\n  unlocked: Unlock,\n} satisfies Record<string, LucideIcon>;\n\nexport type IconName = keyof typeof iconMap;\n"],"names":[],"mappings":";;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA6EO,MAAM,UAAU;IACrB,OAAO,sNAAQ;IACf,MAAM,2MAAI;IACV,aAAa,mOAAW;IACxB,KAAK,6MAAK;IACV,UAAU,gNAAM;IAChB,OAAO,0MAAI;IACX,UAAU,0NAAQ;IAClB,OAAO,6MAAK;IACZ,SAAS,0MAAI;IACb,cAAc,yOAAa;IAC3B,OAAO,iNAAK;IACZ,QAAQ,oNAAM;IACd,UAAU,0OAAY;IACtB,cAAc,sOAAY;IAC1B,aAAa,mOAAW;IACxB,QAAQ,gNAAM;IACd,QAAQ,qPAAiB;IACzB,MAAM,uOAAW;IACjB,OAAO,iMAAC;IACR,MAAM,0MAAI;IACV,IAAI,6MAAK;IACT,YAAY,mNAAO;IACnB,MAAM,mNAAO;IACb,MAAM,yOAAa;IACnB,YAAY,6MAAK;IACjB,cAAc,6MAAK;IACnB,aAAa,0MAAI;IACjB,MAAM,sNAAQ;IACd,UAAU,6MAAK;IACf,eAAe,sNAAQ;IACvB,aAAa,6MAAK;IAClB,UAAU,6MAAK;IACf,YAAY,0NAAQ;IACpB,UAAU,0MAAI;IACd,YAAY,gOAAU;IACtB,OAAO,gOAAU;IACjB,QAAQ,+OAAe;IACvB,OAAO,gNAAM;IACb,SAAS,gNAAM;IACf,KAAK,gNAAM;IACX,UAAU,sNAAQ;IAClB,cAAc,mNAAO;IACrB,gBAAgB,qOAAY;IAC5B,SAAS,gOAAU;IACnB,QAAQ,0NAAQ;IAChB,SAAS,0MAAI;IACb,UAAU,yOAAa;IACvB,QAAQ,oNAAM;IACd,QAAQ,mNAAO;IACf,QAAQ,uNAAO;IACf,KAAK,4OAAU;IACf,WAAW,+OAAe;IAC1B,aAAa,sOAAY;IACzB,WAAW,6MAAK;IAChB,WAAW,0NAAQ;IACnB,QAAQ,0PAAkB;IAC1B,gBAAgB,gPAAc;IAC9B,SAAS,mNAAO;IAChB,SAAS,mOAAW;IACpB,eAAe,0MAAI;IACnB,OAAO,mOAAW;IAClB,OAAO,6MAAK;IACZ,MAAM,6NAAS;IACf,UAAU,sNAAQ;IAClB,UAAU,mNAAO;IACjB,MAAM,gNAAM;IACZ,SAAS,6MAAK;IACd,QAAQ,uNAAO;IACf,SAAS,mNAAO;IAChB,UAAU,sNAAQ;IAClB,QAAQ,gNAAM;IACd,QAAQ,6MAAK;IACb,QAAQ,0NAAQ;IAChB,QAAQ,0MAAI;IACZ,UAAU,sNAAM;AAClB"}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/icons/IconStatic.tsx"],"sourcesContent":["import type { IconName } from \"@/components/icons/iconMap\";\nimport { iconMap } from \"@/components/icons/iconMap\";\n\nexport type IconBaseProps = {\n  name: IconName;\n  size?: number;\n  strokeWidth?: number;\n  className?: string;\n  title?: string;\n  decorative?: boolean;\n};\n\nexport function IconStatic({\n  name,\n  size = 16,\n  strokeWidth = 1.5,\n  className,\n  title,\n  decorative = true,\n}: IconBaseProps) {\n  const IconComponent = iconMap[name];\n  const ariaLabel = title ?? name;\n\n  return (\n    <span\n      className={`inline-flex shrink-0 items-center justify-center ${className ?? \"\"}`}\n      style={{ width: size, height: size }}\n    >\n      <IconComponent\n        width={size}\n        height={size}\n        strokeWidth={strokeWidth}\n        color=\"currentColor\"\n        aria-hidden={decorative}\n        role={decorative ? undefined : \"img\"}\n        aria-label={decorative ? undefined : ariaLabel}\n        focusable=\"false\"\n        className=\"block\"\n        vectorEffect=\"non-scaling-stroke\"\n      >\n        {title ? <title>{title}</title> : null}\n      </IconComponent>\n    </span>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAWO,SAAS,WAAW,EACzB,IAAI,EACJ,OAAO,EAAE,EACT,cAAc,GAAG,EACjB,SAAS,EACT,KAAK,EACL,aAAa,IAAI,EACH;IACd,MAAM,gBAAgB,yIAAO,CAAC,KAAK;IACnC,MAAM,YAAY,SAAS;IAE3B,qBACE,8OAAC;QACC,WAAW,CAAC,iDAAiD,EAAE,aAAa,IAAI;QAChF,OAAO;YAAE,OAAO;YAAM,QAAQ;QAAK;kBAEnC,cAAA,8OAAC;YACC,OAAO;YACP,QAAQ;YACR,aAAa;YACb,OAAM;YACN,eAAa;YACb,MAAM,aAAa,YAAY;YAC/B,cAAY,aAAa,YAAY;YACrC,WAAU;YACV,WAAU;YACV,cAAa;sBAEZ,sBAAQ,8OAAC;0BAAO;;;;;uBAAiB;;;;;;;;;;;AAI1C"}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/portal/StatusBadge.tsx"],"sourcesContent":["import type { IconName } from \"@/components/icons/iconMap\";\nimport { IconStatic } from \"@/components/icons/IconStatic\";\n\ntype StatusBadgeProps = {\n  label: string;\n  icon?: IconName;\n};\n\nexport function StatusBadge({ label, icon }: StatusBadgeProps) {\n  return (\n    <span className=\"inline-flex items-center rounded-full border border-line/80 bg-ink px-2 py-1 text-[0.6rem] uppercase tracking-[0.2em] text-slate\">\n      {icon && (\n        <IconStatic\n          name={icon}\n          size={12}\n          strokeWidth={1.25}\n          className=\"mr-1 text-slate\"\n        />\n      )}\n      {label}\n    </span>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAOO,SAAS,YAAY,EAAE,KAAK,EAAE,IAAI,EAAoB;IAC3D,qBACE,8OAAC;QAAK,WAAU;;YACb,sBACC,8OAAC,gJAAU;gBACT,MAAM;gBACN,MAAM;gBACN,aAAa;gBACb,WAAU;;;;;;YAGb;;;;;;;AAGP"}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/app/portal/finance/page.tsx"],"sourcesContent":["import { redirect } from \"next/navigation\";\nimport { z } from \"zod\";\nimport { prisma } from \"@/lib/prisma\";\nimport { formatDateShort } from \"@/lib/format\";\nimport { requireLucienStaff, requirePortalSession } from \"@/lib/portal\";\nimport { logAuditEvent } from \"@/lib/audit\";\nimport { createNotifications } from \"@/lib/notifications\";\nimport { StatusBadge } from \"@/components/portal/StatusBadge\";\n\nconst parseDate = (value?: string | null) => {\n  if (!value) return null;\n  const parsed = new Date(value);\n  return Number.isNaN(parsed.getTime()) ? null : parsed;\n};\n\nexport default async function FinancePage() {\n  const session = await requirePortalSession();\n  requireLucienStaff(session.user.role);\n\n  const [engagements, invoices] = await Promise.all([\n    prisma.engagement.findMany({\n      orderBy: { updatedAt: \"desc\" },\n      select: { id: true, title: true, orgId: true, purchaseOrderRef: true },\n    }),\n    prisma.invoice.findMany({\n      orderBy: { createdAt: \"desc\" },\n      include: { engagement: true },\n    }),\n  ]);\n\n  async function createInvoice(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    requireLucienStaff(session.user.role);\n\n    const schema = z.object({\n      engagementId: z.string().min(1),\n      invoiceNumber: z.string().optional().nullable(),\n      issueDate: z.string().optional().nullable(),\n      dueDate: z.string().optional().nullable(),\n      referencePO: z.string().optional().nullable(),\n      amountEUR: z.string().optional().nullable(),\n    });\n\n    const parsed = schema.parse({\n      engagementId: formData.get(\"engagementId\"),\n      invoiceNumber: formData.get(\"invoiceNumber\"),\n      issueDate: formData.get(\"issueDate\"),\n      dueDate: formData.get(\"dueDate\"),\n      referencePO: formData.get(\"referencePO\"),\n      amountEUR: formData.get(\"amountEUR\"),\n    });\n\n    const engagement = await prisma.engagement.findUnique({\n      where: { id: parsed.engagementId },\n    });\n\n    if (!engagement) {\n      return;\n    }\n\n    const amountEUR = parsed.amountEUR\n      ? Number.parseInt(parsed.amountEUR, 10)\n      : null;\n\n    const invoice = await prisma.invoice.create({\n      data: {\n        orgId: engagement.orgId,\n        engagementId: engagement.id,\n        invoiceNumber: parsed.invoiceNumber ?? null,\n        issueDate: parseDate(parsed.issueDate),\n        dueDate: parseDate(parsed.dueDate),\n        referencePO: parsed.referencePO ?? engagement.purchaseOrderRef ?? null,\n        currency: \"EUR\",\n        amountEUR,\n      },\n    });\n\n    await logAuditEvent({\n      orgId: engagement.orgId,\n      userId: session.user.id,\n      action: \"invoice_created\",\n      resourceType: \"invoice\",\n      resourceId: invoice.id,\n    });\n\n    await createNotifications({\n      orgId: engagement.orgId,\n      recipientRoles: [\"org_admin\", \"org_user\"],\n      recipientOrgId: engagement.orgId,\n      type: \"invoice_created\",\n      title: \"Invoice issued\",\n      body: `Invoice ${invoice.invoiceNumber ?? invoice.id} issued for ${engagement.title}.`,\n      entityType: \"invoice\",\n      entityId: invoice.id,\n    });\n\n    redirect(\"/portal/finance\");\n  }\n\n  async function markInvoicePaid(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    requireLucienStaff(session.user.role);\n\n    const schema = z.object({\n      invoiceId: z.string().min(1),\n    });\n\n    const parsed = schema.parse({\n      invoiceId: formData.get(\"invoiceId\"),\n    });\n\n    const invoice = await prisma.invoice.update({\n      where: { id: parsed.invoiceId },\n      data: { paidAt: new Date() },\n    });\n\n    await logAuditEvent({\n      orgId: invoice.orgId,\n      userId: session.user.id,\n      action: \"invoice_paid\",\n      resourceType: \"invoice\",\n      resourceId: invoice.id,\n    });\n\n    await createNotifications({\n      orgId: invoice.orgId,\n      recipientRoles: [\"org_admin\", \"org_user\"],\n      recipientOrgId: invoice.orgId,\n      type: \"invoice_paid\",\n      title: \"Invoice marked paid\",\n      body: `Invoice ${invoice.invoiceNumber ?? invoice.id} marked as paid.`,\n      entityType: \"invoice\",\n      entityId: invoice.id,\n    });\n\n    redirect(\"/portal/finance\");\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"space-y-2\">\n        <p className=\"text-xs uppercase tracking-[0.3em] text-slate\">Finance</p>\n        <h1 className=\"text-2xl font-semibold text-ash\">Invoices</h1>\n        <p className=\"text-sm text-muted\">\n          Create and update invoices tied to engagements and procurement\n          references.\n        </p>\n      </div>\n\n      <form\n        action={createInvoice}\n        className=\"rounded-2xl border border-line/80 bg-soft p-6 space-y-4\"\n      >\n        <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">\n          Issue invoice\n        </h2>\n        <div className=\"grid gap-4 md:grid-cols-2\">\n          <label className=\"space-y-2 text-sm text-slate\">\n            Engagement\n            <select\n              name=\"engagementId\"\n              required\n              className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n            >\n              <option value=\"\">Select engagement</option>\n              {engagements.map((engagement) => (\n                <option key={engagement.id} value={engagement.id}>\n                  {engagement.title}\n                </option>\n              ))}\n            </select>\n          </label>\n          <label className=\"space-y-2 text-sm text-slate\">\n            Invoice number\n            <input\n              name=\"invoiceNumber\"\n              className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n            />\n          </label>\n          <label className=\"space-y-2 text-sm text-slate\">\n            Issue date\n            <input\n              name=\"issueDate\"\n              type=\"date\"\n              className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n            />\n          </label>\n          <label className=\"space-y-2 text-sm text-slate\">\n            Due date\n            <input\n              name=\"dueDate\"\n              type=\"date\"\n              className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n            />\n          </label>\n          <label className=\"space-y-2 text-sm text-slate\">\n            Reference PO\n            <input\n              name=\"referencePO\"\n              className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n            />\n          </label>\n          <label className=\"space-y-2 text-sm text-slate\">\n            Amount (EUR)\n            <input\n              name=\"amountEUR\"\n              type=\"number\"\n              className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n            />\n          </label>\n        </div>\n        <button\n          type=\"submit\"\n          className=\"btn-animate btn-primary rounded-full px-6 py-2 text-xs uppercase tracking-[0.2em]\"\n        >\n          Create invoice\n        </button>\n      </form>\n\n      <div className=\"rounded-2xl border border-line/80 bg-soft p-6\">\n        <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">\n          Issued invoices\n        </h2>\n        {invoices.length === 0 ? (\n          <p className=\"mt-4 text-sm text-muted\">No invoices issued yet.</p>\n        ) : (\n          <div className=\"mt-4 space-y-3 text-sm text-muted\">\n            {invoices.map((invoice) => (\n              <div\n                key={invoice.id}\n                className=\"rounded-xl border border-line/80 bg-ink px-4 py-3\"\n              >\n                <div className=\"flex flex-wrap items-center gap-2 text-ash\">\n                  <span>\n                    {invoice.invoiceNumber ?? \"Invoice\"} · {invoice.currency}\n                    {invoice.amountEUR\n                      ? ` ${invoice.amountEUR.toLocaleString(\"en-GB\")}`\n                      : \"\"}\n                  </span>\n                  {(invoice.issueDate || invoice.paidAt) && (\n                    <StatusBadge label=\"Locked\" icon=\"locked\" />\n                  )}\n                </div>\n                <div className=\"mt-2 text-xs text-slate\">\n                  {invoice.engagement?.title ?? \"Engagement\"} · Issued{\" \"}\n                  {invoice.issueDate ? formatDateShort(invoice.issueDate) : \"TBD\"}\n                </div>\n                <div className=\"mt-2 text-xs text-slate\">\n                  Status: {invoice.paidAt ? \"Paid\" : \"Unpaid\"} · PO{\" \"}\n                  {invoice.referencePO ?? invoice.engagement?.purchaseOrderRef ?? \"—\"}\n                </div>\n                {!invoice.paidAt && (\n                  <form action={markInvoicePaid} className=\"mt-3\">\n                    <input type=\"hidden\" name=\"invoiceId\" value={invoice.id} />\n                    <button\n                      type=\"submit\"\n                      className=\"btn-animate btn-secondary rounded-full px-4 py-2 text-xs uppercase tracking-[0.2em]\"\n                    >\n                      Mark paid\n                    </button>\n                  </form>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;oMAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAEA,MAAM,YAAY,CAAC;IACjB,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,SAAS,IAAI,KAAK;IACxB,OAAO,OAAO,KAAK,CAAC,OAAO,OAAO,MAAM,OAAO;AACjD;MAiBE,wBAAA,eAAe,cAAc,QAAkB;IAG7C,MAAM,UAAU,MAAM,IAAA,qIAAoB;IAC1C,IAAA,mIAAkB,EAAC,QAAQ,IAAI,CAAC,IAAI;IAEpC,MAAM,SAAS,kLAAC,CAAC,MAAM,CAAC;QACtB,cAAc,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC7B,eAAe,kLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;QAC7C,WAAW,kLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;QACzC,SAAS,kLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;QACvC,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;QAC3C,WAAW,kLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IAC3C;IAEA,MAAM,SAAS,OAAO,KAAK,CAAC;QAC1B,cAAc,SAAS,GAAG,CAAC;QAC3B,eAAe,SAAS,GAAG,CAAC;QAC5B,WAAW,SAAS,GAAG,CAAC;QACxB,SAAS,SAAS,GAAG,CAAC;QACtB,aAAa,SAAS,GAAG,CAAC;QAC1B,WAAW,SAAS,GAAG,CAAC;IAC1B;IAEA,MAAM,aAAa,MAAM,uHAAM,CAAC,UAAU,CAAC,UAAU,CAAC;QACpD,OAAO;YAAE,IAAI,OAAO,YAAY;QAAC;IACnC;IAEA,IAAI,CAAC,YAAY;QACf;IACF;IAEA,MAAM,YAAY,OAAO,SAAS,GAC9B,OAAO,QAAQ,CAAC,OAAO,SAAS,EAAE,MAClC;IAEJ,MAAM,UAAU,MAAM,uHAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QAC1C,MAAM;YACJ,OAAO,WAAW,KAAK;YACvB,cAAc,WAAW,EAAE;YAC3B,eAAe,OAAO,aAAa,IAAI;YACvC,WAAW,UAAU,OAAO,SAAS;YACrC,SAAS,UAAU,OAAO,OAAO;YACjC,aAAa,OAAO,WAAW,IAAI,WAAW,gBAAgB,IAAI;YAClE,UAAU;YACV;QACF;IACF;IAEA,MAAM,IAAA,6HAAa,EAAC;QAClB,OAAO,WAAW,KAAK;QACvB,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB,QAAQ;QACR,cAAc;QACd,YAAY,QAAQ,EAAE;IACxB;IAEA,MAAM,IAAA,2IAAmB,EAAC;QACxB,OAAO,WAAW,KAAK;QACvB,gBAAgB;YAAC;YAAa;SAAW;QACzC,gBAAgB,WAAW,KAAK;QAChC,MAAM;QACN,OAAO;QACP,MAAM,CAAC,QAAQ,EAAE,QAAQ,aAAa,IAAI,QAAQ,EAAE,CAAC,YAAY,EAAE,WAAW,KAAK,CAAC,CAAC,CAAC;QACtF,YAAY;QACZ,UAAU,QAAQ,EAAE;IACtB;IAEA,IAAA,iMAAQ,EAAC;AACX;+OArEA;MAuEA,wBAAA,eAAe,gBAAgB,QAAkB;IAG/C,MAAM,UAAU,MAAM,IAAA,qIAAoB;IAC1C,IAAA,mIAAkB,EAAC,QAAQ,IAAI,CAAC,IAAI;IAEpC,MAAM,SAAS,kLAAC,CAAC,MAAM,CAAC;QACtB,WAAW,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAC5B;IAEA,MAAM,SAAS,OAAO,KAAK,CAAC;QAC1B,WAAW,SAAS,GAAG,CAAC;IAC1B;IAEA,MAAM,UAAU,MAAM,uHAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QAC1C,OAAO;YAAE,IAAI,OAAO,SAAS;QAAC;QAC9B,MAAM;YAAE,QAAQ,IAAI;QAAO;IAC7B;IAEA,MAAM,IAAA,6HAAa,EAAC;QAClB,OAAO,QAAQ,KAAK;QACpB,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB,QAAQ;QACR,cAAc;QACd,YAAY,QAAQ,EAAE;IACxB;IAEA,MAAM,IAAA,2IAAmB,EAAC;QACxB,OAAO,QAAQ,KAAK;QACpB,gBAAgB;YAAC;YAAa;SAAW;QACzC,gBAAgB,QAAQ,KAAK;QAC7B,MAAM;QACN,OAAO;QACP,MAAM,CAAC,QAAQ,EAAE,QAAQ,aAAa,IAAI,QAAQ,EAAE,CAAC,gBAAgB,CAAC;QACtE,YAAY;QACZ,UAAU,QAAQ,EAAE;IACtB;IAEA,IAAA,iMAAQ,EAAC;AACX;+OAvCA;AAtFa,eAAe;IAC5B,MAAM,UAAU,MAAM,IAAA,qIAAoB;IAC1C,IAAA,mIAAkB,EAAC,QAAQ,IAAI,CAAC,IAAI;IAEpC,MAAM,CAAC,aAAa,SAAS,GAAG,MAAM,QAAQ,GAAG,CAAC;QAChD,uHAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;YACzB,SAAS;gBAAE,WAAW;YAAO;YAC7B,QAAQ;gBAAE,IAAI;gBAAM,OAAO;gBAAM,OAAO;gBAAM,kBAAkB;YAAK;QACvE;QACA,uHAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;YACtB,SAAS;gBAAE,WAAW;YAAO;YAC7B,SAAS;gBAAE,YAAY;YAAK;QAC9B;KACD;QAEc,gBAAf;QAuEe,kBAAf;IAyCA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAgD;;;;;;kCAC7D,8OAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;0BAMpC,8OAAC;gBACC,QAAQ;gBACR,WAAU;;kCAEV,8OAAC;wBAAG,WAAU;kCAAgD;;;;;;kCAG9D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;;oCAA+B;kDAE9C,8OAAC;wCACC,MAAK;wCACL,QAAQ;wCACR,WAAU;;0DAEV,8OAAC;gDAAO,OAAM;0DAAG;;;;;;4CAChB,YAAY,GAAG,CAAC,CAAC,2BAChB,8OAAC;oDAA2B,OAAO,WAAW,EAAE;8DAC7C,WAAW,KAAK;mDADN,WAAW,EAAE;;;;;;;;;;;;;;;;;0CAMhC,8OAAC;gCAAM,WAAU;;oCAA+B;kDAE9C,8OAAC;wCACC,MAAK;wCACL,WAAU;;;;;;;;;;;;0CAGd,8OAAC;gCAAM,WAAU;;oCAA+B;kDAE9C,8OAAC;wCACC,MAAK;wCACL,MAAK;wCACL,WAAU;;;;;;;;;;;;0CAGd,8OAAC;gCAAM,WAAU;;oCAA+B;kDAE9C,8OAAC;wCACC,MAAK;wCACL,MAAK;wCACL,WAAU;;;;;;;;;;;;0CAGd,8OAAC;gCAAM,WAAU;;oCAA+B;kDAE9C,8OAAC;wCACC,MAAK;wCACL,WAAU;;;;;;;;;;;;0CAGd,8OAAC;gCAAM,WAAU;;oCAA+B;kDAE9C,8OAAC;wCACC,MAAK;wCACL,MAAK;wCACL,WAAU;;;;;;;;;;;;;;;;;;kCAIhB,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;0BAKH,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAgD;;;;;;oBAG7D,SAAS,MAAM,KAAK,kBACnB,8OAAC;wBAAE,WAAU;kCAA0B;;;;;6CAEvC,8OAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC;gCAEC,WAAU;;kDAEV,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;;oDACE,QAAQ,aAAa,IAAI;oDAAU;oDAAI,QAAQ,QAAQ;oDACvD,QAAQ,SAAS,GACd,CAAC,CAAC,EAAE,QAAQ,SAAS,CAAC,cAAc,CAAC,UAAU,GAC/C;;;;;;;4CAEL,CAAC,QAAQ,SAAS,IAAI,QAAQ,MAAM,mBACnC,8OAAC,mJAAW;gDAAC,OAAM;gDAAS,MAAK;;;;;;;;;;;;kDAGrC,8OAAC;wCAAI,WAAU;;4CACZ,QAAQ,UAAU,EAAE,SAAS;4CAAa;4CAAU;4CACpD,QAAQ,SAAS,GAAG,IAAA,gIAAe,EAAC,QAAQ,SAAS,IAAI;;;;;;;kDAE5D,8OAAC;wCAAI,WAAU;;4CAA0B;4CAC9B,QAAQ,MAAM,GAAG,SAAS;4CAAS;4CAAM;4CACjD,QAAQ,WAAW,IAAI,QAAQ,UAAU,EAAE,oBAAoB;;;;;;;oCAEjE,CAAC,QAAQ,MAAM,kBACd,8OAAC;wCAAK,QAAQ;wCAAiB,WAAU;;0DACvC,8OAAC;gDAAM,MAAK;gDAAS,MAAK;gDAAY,OAAO,QAAQ,EAAE;;;;;;0DACvD,8OAAC;gDACC,MAAK;gDACL,WAAU;0DACX;;;;;;;;;;;;;+BA5BA,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;AAwC/B"}},
    {"offset": {"line": 838, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/.next-internal/server/app/portal/finance/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {$$RSC_SERVER_ACTION_1 as '404254d6b6338c091db7d2d2bb2e72e07b1df06733'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_0 as '40f3aba18d01a64b639e3a4f7d2dea266c3fd719c8'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}