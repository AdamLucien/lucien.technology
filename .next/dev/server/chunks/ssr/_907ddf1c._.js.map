{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/lib/format.ts"],"sourcesContent":["export function formatDateShort(date: Date) {\n  return new Intl.DateTimeFormat(\"en-GB\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"2-digit\",\n  }).format(date);\n}\n\nexport function formatBytes(bytes: number) {\n  if (bytes < 1024) {\n    return `${bytes} B`;\n  }\n  const units = [\"KB\", \"MB\", \"GB\"];\n  let size = bytes / 1024;\n  let unitIndex = 0;\n  while (size >= 1024 && unitIndex < units.length - 1) {\n    size /= 1024;\n    unitIndex += 1;\n  }\n  return `${size.toFixed(size >= 10 ? 0 : 1)} ${units[unitIndex]}`;\n}\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,gBAAgB,IAAU;IACxC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP,GAAG,MAAM,CAAC;AACZ;AAEO,SAAS,YAAY,KAAa;IACvC,IAAI,QAAQ,MAAM;QAChB,OAAO,GAAG,MAAM,EAAE,CAAC;IACrB;IACA,MAAM,QAAQ;QAAC;QAAM;QAAM;KAAK;IAChC,IAAI,OAAO,QAAQ;IACnB,IAAI,YAAY;IAChB,MAAO,QAAQ,QAAQ,YAAY,MAAM,MAAM,GAAG,EAAG;QACnD,QAAQ;QACR,aAAa;IACf;IACA,OAAO,GAAG,KAAK,OAAO,CAAC,QAAQ,KAAK,IAAI,GAAG,CAAC,EAAE,KAAK,CAAC,UAAU,EAAE;AAClE"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/lib/notifications.ts"],"sourcesContent":["import type { UserRole } from \"@prisma/client\";\nimport { prisma } from \"@/lib/prisma\";\n\ntype NotificationPayload = {\n  orgId: string;\n  recipientUserId?: string;\n  recipientRoles?: UserRole[];\n  recipientOrgId?: string;\n  type: string;\n  title: string;\n  body: string;\n  entityType?: string;\n  entityId?: string;\n};\n\nexport async function createNotifications({\n  orgId,\n  recipientUserId,\n  recipientRoles,\n  recipientOrgId,\n  type,\n  title,\n  body,\n  entityType,\n  entityId,\n}: NotificationPayload) {\n  if (recipientUserId) {\n    await prisma.notification.create({\n      data: {\n        orgId,\n        recipientUserId,\n        type,\n        title,\n        body,\n        entityType,\n        entityId,\n      },\n    });\n    return;\n  }\n\n  if (!recipientRoles || recipientRoles.length === 0) {\n    return;\n  }\n\n  const users = await prisma.user.findMany({\n    where: {\n      role: { in: recipientRoles },\n      ...(recipientOrgId ? { orgId: recipientOrgId } : {}),\n    },\n    select: { id: true },\n  });\n\n  if (users.length === 0) {\n    return;\n  }\n\n  await prisma.notification.createMany({\n    data: users.map((user) => ({\n      orgId,\n      recipientUserId: user.id,\n      type,\n      title,\n      body,\n      entityType,\n      entityId,\n    })),\n  });\n}\n"],"names":[],"mappings":";;;;AACA;;AAcO,eAAe,oBAAoB,EACxC,KAAK,EACL,eAAe,EACf,cAAc,EACd,cAAc,EACd,IAAI,EACJ,KAAK,EACL,IAAI,EACJ,UAAU,EACV,QAAQ,EACY;IACpB,IAAI,iBAAiB;QACnB,MAAM,uHAAM,CAAC,YAAY,CAAC,MAAM,CAAC;YAC/B,MAAM;gBACJ;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;YACF;QACF;QACA;IACF;IAEA,IAAI,CAAC,kBAAkB,eAAe,MAAM,KAAK,GAAG;QAClD;IACF;IAEA,MAAM,QAAQ,MAAM,uHAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACvC,OAAO;YACL,MAAM;gBAAE,IAAI;YAAe;YAC3B,GAAI,iBAAiB;gBAAE,OAAO;YAAe,IAAI,CAAC,CAAC;QACrD;QACA,QAAQ;YAAE,IAAI;QAAK;IACrB;IAEA,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB;IACF;IAEA,MAAM,uHAAM,CAAC,YAAY,CAAC,UAAU,CAAC;QACnC,MAAM,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;gBACzB;gBACA,iBAAiB,KAAK,EAAE;gBACxB;gBACA;gBACA;gBACA;gBACA;YACF,CAAC;IACH;AACF"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/portal/DocumentUploader.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DocumentUploader = registerClientReference(\n    function() { throw new Error(\"Attempted to call DocumentUploader() from the server but DocumentUploader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/portal/DocumentUploader.tsx <module evaluation>\",\n    \"DocumentUploader\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,wEACA","ignoreList":[0]}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/portal/DocumentUploader.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DocumentUploader = registerClientReference(\n    function() { throw new Error(\"Attempted to call DocumentUploader() from the server but DocumentUploader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/portal/DocumentUploader.tsx\",\n    \"DocumentUploader\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,oDACA","ignoreList":[0]}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/portal/EngagementEditPanel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const EngagementEditPanel = registerClientReference(\n    function() { throw new Error(\"Attempted to call EngagementEditPanel() from the server but EngagementEditPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/portal/EngagementEditPanel.tsx <module evaluation>\",\n    \"EngagementEditPanel\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,2EACA","ignoreList":[0]}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/portal/EngagementEditPanel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const EngagementEditPanel = registerClientReference(\n    function() { throw new Error(\"Attempted to call EngagementEditPanel() from the server but EngagementEditPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/portal/EngagementEditPanel.tsx\",\n    \"EngagementEditPanel\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,uDACA","ignoreList":[0]}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/portal/ArchiveDocumentButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ArchiveDocumentButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call ArchiveDocumentButton() from the server but ArchiveDocumentButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/portal/ArchiveDocumentButton.tsx <module evaluation>\",\n    \"ArchiveDocumentButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,wBAAwB,IAAA,wQAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,6EACA","ignoreList":[0]}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/portal/ArchiveDocumentButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ArchiveDocumentButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call ArchiveDocumentButton() from the server but ArchiveDocumentButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/portal/ArchiveDocumentButton.tsx\",\n    \"ArchiveDocumentButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,wBAAwB,IAAA,wQAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,yDACA","ignoreList":[0]}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/icons/iconMap.ts"],"sourcesContent":["import type { LucideIcon } from \"lucide-react\";\nimport {\n  Activity,\n  AlertTriangle,\n  Aperture,\n  Archive,\n  ArrowUpDown,\n  ArrowUpRight,\n  BadgeCheck,\n  Bell,\n  BookOpen,\n  Boxes,\n  Brain,\n  Building2,\n  CalendarClock,\n  Check,\n  CheckCircle2,\n  ChevronDown,\n  ChevronRight,\n  ClipboardList,\n  ClipboardSignature,\n  Database,\n  Download,\n  DraftingCompass,\n  Euro,\n  Factory,\n  FileDown,\n  FileSearch,\n  FileText,\n  Flame,\n  FolderKanban,\n  Gauge,\n  Gavel,\n  GitPullRequest,\n  Hammer,\n  HelpCircle,\n  History,\n  Home,\n  Inbox,\n  Info,\n  KeyRound,\n  LayoutDashboard,\n  LifeBuoy,\n  ListChecks,\n  Lock,\n  LogIn,\n  LogOut,\n  Mail,\n  MapPin,\n  Menu,\n  Monitor,\n  Network,\n  Package,\n  Pencil,\n  Plug,\n  Receipt,\n  Repeat2,\n  Route,\n  Scale,\n  Search,\n  Settings,\n  Shield,\n  ShieldCheck,\n  ShoppingBag,\n  SlidersHorizontal,\n  Sparkles,\n  Target,\n  Timer,\n  Truck,\n  Unlock,\n  Upload,\n  Users,\n  WalletCards,\n  Wrench,\n  X,\n  XCircle,\n} from \"lucide-react\";\n\nexport const iconMap = {\n  brand: Aperture,\n  home: Home,\n  marketplace: ShoppingBag,\n  how: Route,\n  security: Shield,\n  about: Info,\n  insights: BookOpen,\n  legal: Scale,\n  contact: Mail,\n  requestScope: ClipboardList,\n  login: LogIn,\n  logout: LogOut,\n  external: ArrowUpRight,\n  chevronRight: ChevronRight,\n  chevronDown: ChevronDown,\n  search: Search,\n  filter: SlidersHorizontal,\n  sort: ArrowUpDown,\n  close: X,\n  menu: Menu,\n  ai: Brain,\n  industrial: Factory,\n  itot: Network,\n  risk: AlertTriangle,\n  governance: Gavel,\n  architecture: Boxes,\n  integration: Plug,\n  data: Database,\n  realtime: Timer,\n  observability: Activity,\n  performance: Gauge,\n  delivery: Truck,\n  resilience: LifeBuoy,\n  controls: Lock,\n  compliance: BadgeCheck,\n  audit: FileSearch,\n  design: DraftingCompass,\n  build: Hammer,\n  operate: Wrench,\n  fit: Target,\n  outcomes: Sparkles,\n  deliverables: Package,\n  definitionDone: CheckCircle2,\n  process: ListChecks,\n  inputs: KeyRound,\n  pricing: Euro,\n  duration: CalendarClock,\n  onsite: MapPin,\n  remote: Monitor,\n  hybrid: Repeat2,\n  faq: HelpCircle,\n  dashboard: LayoutDashboard,\n  engagements: FolderKanban,\n  inquiries: Inbox,\n  documents: FileText,\n  scopes: ClipboardSignature,\n  changeRequests: GitPullRequest,\n  billing: Receipt,\n  finance: WalletCards,\n  notifications: Bell,\n  admin: ShieldCheck,\n  users: Users,\n  orgs: Building2,\n  settings: Settings,\n  timeline: History,\n  edit: Pencil,\n  approve: Check,\n  reject: XCircle,\n  archive: Archive,\n  download: Download,\n  upload: Upload,\n  danger: Flame,\n  export: FileDown,\n  locked: Lock,\n  unlocked: Unlock,\n} satisfies Record<string, LucideIcon>;\n\nexport type IconName = keyof typeof iconMap;\n"],"names":[],"mappings":";;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA6EO,MAAM,UAAU;IACrB,OAAO,sNAAQ;IACf,MAAM,2MAAI;IACV,aAAa,mOAAW;IACxB,KAAK,6MAAK;IACV,UAAU,gNAAM;IAChB,OAAO,0MAAI;IACX,UAAU,0NAAQ;IAClB,OAAO,6MAAK;IACZ,SAAS,0MAAI;IACb,cAAc,yOAAa;IAC3B,OAAO,iNAAK;IACZ,QAAQ,oNAAM;IACd,UAAU,0OAAY;IACtB,cAAc,sOAAY;IAC1B,aAAa,mOAAW;IACxB,QAAQ,gNAAM;IACd,QAAQ,qPAAiB;IACzB,MAAM,uOAAW;IACjB,OAAO,iMAAC;IACR,MAAM,0MAAI;IACV,IAAI,6MAAK;IACT,YAAY,mNAAO;IACnB,MAAM,mNAAO;IACb,MAAM,yOAAa;IACnB,YAAY,6MAAK;IACjB,cAAc,6MAAK;IACnB,aAAa,0MAAI;IACjB,MAAM,sNAAQ;IACd,UAAU,6MAAK;IACf,eAAe,sNAAQ;IACvB,aAAa,6MAAK;IAClB,UAAU,6MAAK;IACf,YAAY,0NAAQ;IACpB,UAAU,0MAAI;IACd,YAAY,gOAAU;IACtB,OAAO,gOAAU;IACjB,QAAQ,+OAAe;IACvB,OAAO,gNAAM;IACb,SAAS,gNAAM;IACf,KAAK,gNAAM;IACX,UAAU,sNAAQ;IAClB,cAAc,mNAAO;IACrB,gBAAgB,qOAAY;IAC5B,SAAS,gOAAU;IACnB,QAAQ,0NAAQ;IAChB,SAAS,0MAAI;IACb,UAAU,yOAAa;IACvB,QAAQ,oNAAM;IACd,QAAQ,mNAAO;IACf,QAAQ,uNAAO;IACf,KAAK,4OAAU;IACf,WAAW,+OAAe;IAC1B,aAAa,sOAAY;IACzB,WAAW,6MAAK;IAChB,WAAW,0NAAQ;IACnB,QAAQ,0PAAkB;IAC1B,gBAAgB,gPAAc;IAC9B,SAAS,mNAAO;IAChB,SAAS,mOAAW;IACpB,eAAe,0MAAI;IACnB,OAAO,mOAAW;IAClB,OAAO,6MAAK;IACZ,MAAM,6NAAS;IACf,UAAU,sNAAQ;IAClB,UAAU,mNAAO;IACjB,MAAM,gNAAM;IACZ,SAAS,6MAAK;IACd,QAAQ,uNAAO;IACf,SAAS,mNAAO;IAChB,UAAU,sNAAQ;IAClB,QAAQ,gNAAM;IACd,QAAQ,6MAAK;IACb,QAAQ,0NAAQ;IAChB,QAAQ,0MAAI;IACZ,UAAU,sNAAM;AAClB"}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/icons/IconStatic.tsx"],"sourcesContent":["import type { IconName } from \"@/components/icons/iconMap\";\nimport { iconMap } from \"@/components/icons/iconMap\";\n\nexport type IconBaseProps = {\n  name: IconName;\n  size?: number;\n  strokeWidth?: number;\n  className?: string;\n  title?: string;\n  decorative?: boolean;\n};\n\nexport function IconStatic({\n  name,\n  size = 16,\n  strokeWidth = 1.5,\n  className,\n  title,\n  decorative = true,\n}: IconBaseProps) {\n  const IconComponent = iconMap[name];\n  const ariaLabel = title ?? name;\n\n  return (\n    <span\n      className={`inline-flex shrink-0 items-center justify-center ${className ?? \"\"}`}\n      style={{ width: size, height: size }}\n    >\n      <IconComponent\n        width={size}\n        height={size}\n        strokeWidth={strokeWidth}\n        color=\"currentColor\"\n        aria-hidden={decorative}\n        role={decorative ? undefined : \"img\"}\n        aria-label={decorative ? undefined : ariaLabel}\n        focusable=\"false\"\n        className=\"block\"\n        vectorEffect=\"non-scaling-stroke\"\n      >\n        {title ? <title>{title}</title> : null}\n      </IconComponent>\n    </span>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAWO,SAAS,WAAW,EACzB,IAAI,EACJ,OAAO,EAAE,EACT,cAAc,GAAG,EACjB,SAAS,EACT,KAAK,EACL,aAAa,IAAI,EACH;IACd,MAAM,gBAAgB,yIAAO,CAAC,KAAK;IACnC,MAAM,YAAY,SAAS;IAE3B,qBACE,8OAAC;QACC,WAAW,CAAC,iDAAiD,EAAE,aAAa,IAAI;QAChF,OAAO;YAAE,OAAO;YAAM,QAAQ;QAAK;kBAEnC,cAAA,8OAAC;YACC,OAAO;YACP,QAAQ;YACR,aAAa;YACb,OAAM;YACN,eAAa;YACb,MAAM,aAAa,YAAY;YAC/B,cAAY,aAAa,YAAY;YACrC,WAAU;YACV,WAAU;YACV,cAAa;sBAEZ,sBAAQ,8OAAC;0BAAO;;;;;uBAAiB;;;;;;;;;;;AAI1C"}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/portal/StatusBadge.tsx"],"sourcesContent":["import type { IconName } from \"@/components/icons/iconMap\";\nimport { IconStatic } from \"@/components/icons/IconStatic\";\n\ntype StatusBadgeProps = {\n  label: string;\n  icon?: IconName;\n};\n\nexport function StatusBadge({ label, icon }: StatusBadgeProps) {\n  return (\n    <span className=\"inline-flex items-center rounded-full border border-line/80 bg-ink px-2 py-1 text-[0.6rem] uppercase tracking-[0.2em] text-slate\">\n      {icon && (\n        <IconStatic\n          name={icon}\n          size={12}\n          strokeWidth={1.25}\n          className=\"mr-1 text-slate\"\n        />\n      )}\n      {label}\n    </span>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAOO,SAAS,YAAY,EAAE,KAAK,EAAE,IAAI,EAAoB;IAC3D,qBACE,8OAAC;QAAK,WAAU;;YACb,sBACC,8OAAC,gJAAU;gBACT,MAAM;gBACN,MAAM;gBACN,aAAa;gBACb,WAAU;;;;;;YAGb;;;;;;;AAGP"}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/app/portal/engagements/%5Bid%5D/page.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport { notFound, redirect } from \"next/navigation\";\nimport { z } from \"zod\";\nimport { prisma } from \"@/lib/prisma\";\nimport { formatBytes, formatDateShort } from \"@/lib/format\";\nimport { requireLucienStaff, requirePortalSession } from \"@/lib/portal\";\nimport { logAuditEvent } from \"@/lib/audit\";\nimport { createNotifications } from \"@/lib/notifications\";\nimport { DocumentUploader } from \"@/components/portal/DocumentUploader\";\nimport { EngagementEditPanel } from \"@/components/portal/EngagementEditPanel\";\nimport { ArchiveDocumentButton } from \"@/components/portal/ArchiveDocumentButton\";\nimport { StatusBadge } from \"@/components/portal/StatusBadge\";\nimport { IconStatic } from \"@/components/icons/IconStatic\";\n\nconst stageOrder = [\n  \"triage\",\n  \"scope_pack\",\n  \"sow\",\n  \"delivery\",\n  \"handover\",\n  \"ongoing\",\n  \"closed\",\n];\n\nconst stageLabels: Record<string, string> = {\n  triage: \"Triage\",\n  scope_pack: \"Scope pack\",\n  sow: \"SOW\",\n  delivery: \"Delivery\",\n  handover: \"Handover\",\n  ongoing: \"Ongoing\",\n  closed: \"Closed\",\n};\n\nconst statusLabels: Record<string, string> = {\n  on_track: \"On track\",\n  at_risk: \"At risk\",\n  blocked: \"Blocked\",\n  completed: \"Completed\",\n};\n\nconst milestoneStatusLabels: Record<string, string> = {\n  planned: \"Planned\",\n  in_progress: \"In progress\",\n  complete: \"Complete\",\n};\n\nconst deliverableStatusLabels: Record<string, string> = {\n  draft: \"Draft\",\n  review: \"In review\",\n  approved: \"Approved\",\n};\n\nconst changeRequestStatusLabels: Record<string, string> = {\n  proposed: \"Proposed\",\n  needs_info: \"Needs info\",\n  approved: \"Approved\",\n  rejected: \"Rejected\",\n  implemented: \"Implemented\",\n  cancelled: \"Cancelled\",\n};\n\nconst dateOrNull = (value?: string | null) => {\n  if (!value) return null;\n  const parsed = new Date(value);\n  return Number.isNaN(parsed.getTime()) ? null : parsed;\n};\n\nexport default async function EngagementDetailPage({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const { id } = await params;\n  const session = await requirePortalSession();\n  const isStaff =\n    session.user.role === \"lucien_admin\" ||\n    session.user.role === \"lucien_operator\";\n\n  const engagement = await prisma.engagement.findFirst({\n    where: isStaff\n      ? { id }\n      : {\n          id,\n          orgId: session.user.orgId,\n        },\n    include: {\n      inquiry: true,\n      owner: true,\n      documents: { where: { archivedAt: null }, orderBy: { createdAt: \"desc\" } },\n      milestones: { orderBy: { order: \"asc\" } },\n      deliverables: {\n        orderBy: { createdAt: \"asc\" },\n        include: { document: true },\n      },\n      changeRequests: { orderBy: { createdAt: \"desc\" }, include: { createdBy: true } },\n      invoices: { orderBy: { createdAt: \"desc\" } },\n      scopeProposals: { select: { status: true } },\n    },\n  });\n\n  if (!engagement) {\n    notFound();\n  }\n\n  const engagementId = engagement.id;\n  const engagementOrgId = engagement.orgId;\n  const engagementTitle = engagement.title;\n  const engagementLocked = Boolean(\n    (engagement.procurementRef ||\n      engagement.purchaseOrderRef ||\n      engagement.costCenter) &&\n      (engagement.invoices.some((invoice) => invoice.issueDate || invoice.paidAt) ||\n        engagement.scopeProposals.some((scope) => scope.status === \"approved\")),\n  );\n  const exportEnabled =\n    session.user.role === \"lucien_admin\" &&\n    process.env.ENABLE_DOSSIER_EXPORT === \"true\";\n\n  const staffUsers = isStaff\n    ? await prisma.user.findMany({\n        where: { role: { in: [\"lucien_admin\", \"lucien_operator\"] } },\n        orderBy: { email: \"asc\" },\n      })\n    : [];\n\n  const editEvents = await prisma.editEvent.findMany({\n    where: {\n      orgId: engagementOrgId,\n      entityType: \"engagement\",\n      entityId: engagementId,\n    },\n    orderBy: { createdAt: \"desc\" },\n    take: 10,\n    include: { createdBy: true },\n  });\n\n  async function updateEngagement(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    requireLucienStaff(session.user.role);\n\n    const schema = z.object({\n      stage: z.enum([\"triage\", \"scope_pack\", \"sow\", \"delivery\", \"handover\", \"ongoing\", \"closed\"]),\n      status: z.enum([\"on_track\", \"at_risk\", \"blocked\", \"completed\"]),\n      startDate: z.string().optional().nullable(),\n      targetDate: z.string().optional().nullable(),\n      ownerId: z.string().optional().nullable(),\n      procurementRef: z.string().optional().nullable(),\n      purchaseOrderRef: z.string().optional().nullable(),\n      costCenter: z.string().optional().nullable(),\n    });\n\n    const parsed = schema.parse({\n      stage: formData.get(\"stage\"),\n      status: formData.get(\"status\"),\n      startDate: formData.get(\"startDate\"),\n      targetDate: formData.get(\"targetDate\"),\n      ownerId: formData.get(\"ownerId\"),\n      procurementRef: formData.get(\"procurementRef\"),\n      purchaseOrderRef: formData.get(\"purchaseOrderRef\"),\n      costCenter: formData.get(\"costCenter\"),\n    });\n\n    await prisma.engagement.update({\n      where: { id: engagementId },\n      data: {\n        stage: parsed.stage,\n        status: parsed.status,\n        startDate: dateOrNull(parsed.startDate) ?? null,\n        targetDate: dateOrNull(parsed.targetDate) ?? null,\n        ownerId: parsed.ownerId || null,\n        procurementRef: parsed.procurementRef || null,\n        purchaseOrderRef: parsed.purchaseOrderRef || null,\n        costCenter: parsed.costCenter || null,\n      },\n    });\n\n    await logAuditEvent({\n      orgId: engagementOrgId,\n      userId: session.user.id,\n      action: \"engagement_updated\",\n      resourceType: \"engagement\",\n      resourceId: engagementId,\n    });\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n\n  async function createMilestone(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    requireLucienStaff(session.user.role);\n\n    const schema = z.object({\n      title: z.string().min(2),\n      dueDate: z.string().optional().nullable(),\n    });\n\n    const parsed = schema.safeParse({\n      title: formData.get(\"title\"),\n      dueDate: formData.get(\"dueDate\"),\n    });\n\n    if (!parsed.success) {\n      return;\n    }\n\n    const order = await prisma.milestone.count({\n      where: { engagementId },\n    });\n\n    await prisma.milestone.create({\n      data: {\n        orgId: engagementOrgId,\n        engagementId,\n        title: parsed.data.title,\n        dueDate: dateOrNull(parsed.data.dueDate),\n        order,\n      },\n    });\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n\n  async function updateMilestone(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    requireLucienStaff(session.user.role);\n\n    const schema = z.object({\n      milestoneId: z.string().min(1),\n      status: z.enum([\"planned\", \"in_progress\", \"complete\"]),\n      dueDate: z.string().optional().nullable(),\n    });\n\n    const parsed = schema.parse({\n      milestoneId: formData.get(\"milestoneId\"),\n      status: formData.get(\"status\"),\n      dueDate: formData.get(\"dueDate\"),\n    });\n\n    const milestone = await prisma.milestone.findUnique({\n      where: { id: parsed.milestoneId },\n    });\n\n    if (!milestone || milestone.engagementId !== engagementId) {\n      notFound();\n    }\n\n    await prisma.milestone.update({\n      where: { id: parsed.milestoneId },\n      data: {\n        status: parsed.status,\n        dueDate: dateOrNull(parsed.dueDate),\n      },\n    });\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n\n  async function createDeliverable(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    requireLucienStaff(session.user.role);\n\n    const schema = z.object({\n      title: z.string().min(2),\n    });\n\n    const parsed = schema.safeParse({\n      title: formData.get(\"title\"),\n    });\n\n    if (!parsed.success) {\n      return;\n    }\n\n    await prisma.deliverable.create({\n      data: {\n        orgId: engagementOrgId,\n        engagementId,\n        title: parsed.data.title,\n      },\n    });\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n\n  async function updateDeliverable(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    requireLucienStaff(session.user.role);\n\n    const schema = z.object({\n      deliverableId: z.string().min(1),\n      status: z.enum([\"draft\", \"review\", \"approved\"]),\n    });\n\n    const parsed = schema.parse({\n      deliverableId: formData.get(\"deliverableId\"),\n      status: formData.get(\"status\"),\n    });\n\n    const deliverable = await prisma.deliverable.findUnique({\n      where: { id: parsed.deliverableId },\n    });\n\n    if (!deliverable || deliverable.engagementId !== engagementId) {\n      notFound();\n    }\n\n    await prisma.deliverable.update({\n      where: { id: parsed.deliverableId },\n      data: {\n        status: parsed.status,\n      },\n    });\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n\n  async function approveDeliverable(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    const schema = z.object({\n      deliverableId: z.string().min(1),\n      approvalNote: z.string().max(240).optional().nullable(),\n    });\n\n    const parsed = schema.parse({\n      deliverableId: formData.get(\"deliverableId\"),\n      approvalNote: formData.get(\"approvalNote\"),\n    });\n\n    const deliverable = await prisma.deliverable.findUnique({\n      where: { id: parsed.deliverableId },\n    });\n\n    if (!deliverable || deliverable.orgId !== session.user.orgId) {\n      notFound();\n    }\n\n    await prisma.deliverable.update({\n      where: { id: parsed.deliverableId },\n      data: {\n        status: \"approved\",\n        approvedAt: new Date(),\n        approvedById: session.user.id,\n        approvalNote: parsed.approvalNote || null,\n      },\n    });\n\n    await logAuditEvent({\n      orgId: deliverable.orgId,\n      userId: session.user.id,\n      action: \"deliverable_approved\",\n      resourceType: \"deliverable\",\n      resourceId: deliverable.id,\n    });\n\n    await createNotifications({\n      orgId: deliverable.orgId,\n      recipientRoles: [\"lucien_admin\", \"lucien_operator\"],\n      type: \"deliverable_approved\",\n      title: \"Deliverable approved\",\n      body: `${deliverable.title} was approved by the client.`,\n      entityType: \"deliverable\",\n      entityId: deliverable.id,\n    });\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n\n  async function createChangeRequest(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    const isStaff =\n      session.user.role === \"lucien_admin\" ||\n      session.user.role === \"lucien_operator\";\n\n    const schema = z.object({\n      title: z.string().min(3),\n      description: z.string().min(10),\n      impact: z.enum([\"scope\", \"schedule\", \"cost\", \"risk\"]),\n      severity: z.enum([\"low\", \"med\", \"high\"]),\n    });\n\n    const parsed = schema.safeParse({\n      title: formData.get(\"title\"),\n      description: formData.get(\"description\"),\n      impact: formData.get(\"impact\"),\n      severity: formData.get(\"severity\"),\n    });\n\n    if (!parsed.success) {\n      return;\n    }\n\n    const changeRequest = await prisma.changeRequest.create({\n      data: {\n        orgId: engagementOrgId,\n        engagementId,\n        createdByUserId: session.user.id,\n        title: parsed.data.title,\n        description: parsed.data.description,\n        impact: parsed.data.impact,\n        severity: parsed.data.severity,\n        status: \"proposed\",\n        requestedAt: new Date(),\n      },\n    });\n\n    await logAuditEvent({\n      orgId: engagementOrgId,\n      userId: session.user.id,\n      action: \"change_request_created\",\n      resourceType: \"change_request\",\n      resourceId: changeRequest.id,\n    });\n\n    if (isStaff) {\n      await createNotifications({\n        orgId: engagementOrgId,\n        recipientRoles: [\"org_admin\", \"org_user\"],\n        recipientOrgId: engagementOrgId,\n        type: \"change_request_created\",\n        title: \"Change request created\",\n        body: `Change request submitted: ${changeRequest.title}`,\n        entityType: \"change_request\",\n        entityId: changeRequest.id,\n      });\n    } else {\n      await createNotifications({\n        orgId: engagementOrgId,\n        recipientRoles: [\"lucien_admin\", \"lucien_operator\"],\n        type: \"change_request_created\",\n        title: \"New change request\",\n        body: `Client submitted: ${changeRequest.title}`,\n        entityType: \"change_request\",\n        entityId: changeRequest.id,\n      });\n    }\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n\n  async function decideChangeRequest(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    requireLucienStaff(session.user.role);\n\n    const schema = z.object({\n      changeRequestId: z.string().min(1),\n      status: z.enum([\"approved\", \"rejected\", \"needs_info\"]),\n      decisionNote: z.string().min(3),\n      costDeltaEUR: z.string().optional().nullable(),\n      scheduleDeltaDays: z.string().optional().nullable(),\n    });\n\n    const parsed = schema.safeParse({\n      changeRequestId: formData.get(\"changeRequestId\"),\n      status: formData.get(\"status\"),\n      decisionNote: formData.get(\"decisionNote\"),\n      costDeltaEUR: formData.get(\"costDeltaEUR\"),\n      scheduleDeltaDays: formData.get(\"scheduleDeltaDays\"),\n    });\n\n    if (!parsed.success) {\n      return;\n    }\n\n    const costDeltaEUR = parsed.data.costDeltaEUR\n      ? Number.parseInt(parsed.data.costDeltaEUR, 10)\n      : null;\n    const scheduleDeltaDays = parsed.data.scheduleDeltaDays\n      ? Number.parseInt(parsed.data.scheduleDeltaDays, 10)\n      : null;\n\n    await prisma.changeRequest.update({\n      where: { id: parsed.data.changeRequestId },\n      data: {\n        status: parsed.data.status,\n        decisionNote: parsed.data.decisionNote,\n        costDeltaEUR,\n        scheduleDeltaDays,\n        decidedAt: new Date(),\n      },\n    });\n\n    await logAuditEvent({\n      orgId: engagementOrgId,\n      userId: session.user.id,\n      action: \"change_request_decided\",\n      resourceType: \"change_request\",\n      resourceId: parsed.data.changeRequestId,\n      meta: { status: parsed.data.status },\n    });\n\n    await createNotifications({\n      orgId: engagementOrgId,\n      recipientRoles: [\"org_admin\", \"org_user\"],\n      recipientOrgId: engagementOrgId,\n      type: \"change_request_decision\",\n      title: `Change request ${parsed.data.status}`,\n      body: `Decision recorded for ${engagementTitle}.`,\n      entityType: \"change_request\",\n      entityId: parsed.data.changeRequestId,\n    });\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n\n  async function implementChangeRequest(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    requireLucienStaff(session.user.role);\n\n    const schema = z.object({\n      changeRequestId: z.string().min(1),\n    });\n\n    const parsed = schema.parse({\n      changeRequestId: formData.get(\"changeRequestId\"),\n    });\n\n    await prisma.changeRequest.update({\n      where: { id: parsed.changeRequestId },\n      data: {\n        status: \"implemented\",\n        implementedAt: new Date(),\n      },\n    });\n\n    await logAuditEvent({\n      orgId: engagementOrgId,\n      userId: session.user.id,\n      action: \"change_request_implemented\",\n      resourceType: \"change_request\",\n      resourceId: parsed.changeRequestId,\n    });\n\n    await createNotifications({\n      orgId: engagementOrgId,\n      recipientRoles: [\"org_admin\", \"org_user\"],\n      recipientOrgId: engagementOrgId,\n      type: \"change_request_implemented\",\n      title: \"Change request implemented\",\n      body: `Implemented for ${engagementTitle}.`,\n      entityType: \"change_request\",\n      entityId: parsed.changeRequestId,\n    });\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n\n  async function respondToInfoRequest(formData: FormData) {\n    \"use server\";\n\n    const session = await requirePortalSession();\n    if (!session.user.role?.startsWith(\"org_\")) {\n      return;\n    }\n\n    const schema = z.object({\n      changeRequestId: z.string().min(1),\n      description: z.string().min(10),\n    });\n\n    const parsed = schema.safeParse({\n      changeRequestId: formData.get(\"changeRequestId\"),\n      description: formData.get(\"description\"),\n    });\n\n    if (!parsed.success) {\n      return;\n    }\n\n    await prisma.changeRequest.update({\n      where: { id: parsed.data.changeRequestId },\n      data: {\n        description: parsed.data.description,\n        status: \"proposed\",\n      },\n    });\n\n    await logAuditEvent({\n      orgId: engagementOrgId,\n      userId: session.user.id,\n      action: \"change_request_updated\",\n      resourceType: \"change_request\",\n      resourceId: parsed.data.changeRequestId,\n    });\n\n    await createNotifications({\n      orgId: engagementOrgId,\n      recipientRoles: [\"lucien_admin\", \"lucien_operator\"],\n      type: \"change_request_updated\",\n      title: \"Change request updated\",\n      body: `Client updated for ${engagementTitle}.`,\n      entityType: \"change_request\",\n      entityId: parsed.data.changeRequestId,\n    });\n\n    redirect(`/portal/engagements/${engagementId}`);\n  }\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"space-y-2\">\n        <p className=\"text-xs uppercase tracking-[0.3em] text-slate\">\n          Engagement workspace\n        </p>\n        <div className=\"flex flex-wrap items-center gap-3\">\n          <h1 className=\"text-2xl font-semibold text-ash\">{engagement.title}</h1>\n          {engagementLocked && (\n            <StatusBadge label=\"Controlled changes only\" icon=\"locked\" />\n          )}\n          {exportEnabled && (\n            <a\n              href={`/api/portal/export/engagement/${engagementId}`}\n              className=\"rounded-full border border-line/80 px-3 py-1 text-[0.6rem] uppercase tracking-[0.2em] text-slate hover:border-slate hover:text-ash\"\n            >\n              Export dossier\n            </a>\n          )}\n        </div>\n        <p className=\"text-sm text-muted\">\n          Service: {engagement.serviceSlug ?? \"Custom engagement\"}\n        </p>\n      </div>\n\n      <section className=\"rounded-2xl border border-line/80 bg-soft p-6\">\n        <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">\n          Overview\n        </h2>\n        <div className=\"mt-4 grid gap-4 md:grid-cols-3\">\n          <div>\n            <div className=\"text-xs text-slate\">Stage</div>\n            <div className=\"text-lg font-semibold text-ash\">\n              {stageLabels[engagement.stage] ?? engagement.stage}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-xs text-slate\">Status</div>\n            <div className=\"text-lg font-semibold text-ash\">\n              {statusLabels[engagement.status] ?? engagement.status}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-xs text-slate\">Next step</div>\n            <div className=\"text-sm text-ash\">\n              {engagement.stage === \"triage\"\n                ? \"Scope pack is being prepared.\"\n                : engagement.stage === \"scope_pack\"\n                  ? \"Scope pack review and alignment.\"\n                  : engagement.stage === \"sow\"\n                    ? \"SOW confirmation and procurement alignment.\"\n                    : engagement.stage === \"delivery\"\n                      ? \"Delivery milestones in progress.\"\n                      : engagement.stage === \"handover\"\n                        ? \"Handover and readiness review.\"\n                        : engagement.stage === \"ongoing\"\n                          ? \"Ongoing assurance and oversight.\"\n                          : \"Engagement complete.\"}\n            </div>\n          </div>\n        </div>\n        <div className=\"mt-6 flex flex-wrap gap-2\">\n          {stageOrder.map((stage) => (\n            <span\n              key={stage}\n              className={`rounded-full border px-3 py-1 text-xs uppercase tracking-[0.2em] ${\n                stage === engagement.stage\n                  ? \"border-slate text-ash\"\n                  : \"border-line text-slate\"\n              }`}\n            >\n              {stageLabels[stage]}\n            </span>\n          ))}\n        </div>\n      </section>\n\n      <section className=\"rounded-2xl border border-line/80 bg-soft p-6\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">Edits</h2>\n          <span className=\"text-xs uppercase tracking-[0.2em] text-slate\">\n            Last 10 changes\n          </span>\n        </div>\n        {editEvents.length === 0 ? (\n          <p className=\"mt-4 text-sm text-muted\">\n            No recorded edits yet for this engagement.\n          </p>\n        ) : (\n          <div className=\"mt-4 space-y-3 text-sm text-muted\">\n            {editEvents.map((event) => (\n              <Link\n                key={event.id}\n                href={`/portal/edits/${event.id}`}\n                className=\"card-animate flex flex-col gap-2 rounded-xl border border-line/80 bg-ink px-4 py-3 transition hover:border-slate md:flex-row md:items-center md:justify-between\"\n              >\n                <div>\n                  <div className=\"text-ash\">\n                    {event.kind.replace(\"_\", \" \")} · {event.entityType}\n                  </div>\n                  <div className=\"text-xs text-slate\">\n                    {formatDateShort(event.createdAt)} ·{\" \"}\n                    {event.createdBy?.email ?? \"System\"}\n                  </div>\n                </div>\n                <div className=\"rounded-full border border-line px-3 py-1 text-xs uppercase tracking-[0.2em] text-slate\">\n                  {event.status.replace(\"_\", \" \")}\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n      </section>\n\n      <section className=\"rounded-2xl border border-line/80 bg-soft p-6\">\n        <div className=\"flex flex-wrap items-center justify-between gap-3\">\n          <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">\n            Commercial\n          </h2>\n          <EngagementEditPanel\n            engagementId={engagementId}\n            initialTitle={engagement.title}\n            initialOwnerId={engagement.ownerId}\n            initialStartDate={\n              engagement.startDate\n                ? engagement.startDate.toISOString().slice(0, 10)\n                : null\n            }\n            initialTargetDate={\n              engagement.targetDate\n                ? engagement.targetDate.toISOString().slice(0, 10)\n                : null\n            }\n            initialProcurementRef={engagement.procurementRef}\n            initialPurchaseOrderRef={engagement.purchaseOrderRef}\n            initialCostCenter={engagement.costCenter}\n            ownerOptions={staffUsers.map((user) => ({\n              id: user.id,\n              label: user.email,\n            }))}\n            isStaff={isStaff}\n          />\n        </div>\n        <div className=\"mt-4 grid gap-4 text-sm text-muted md:grid-cols-3\">\n          <div>\n            <div className=\"text-xs text-slate\">Procurement ref</div>\n            <div className=\"text-ash\">{engagement.procurementRef ?? \"—\"}</div>\n          </div>\n          <div>\n            <div className=\"text-xs text-slate\">PO reference</div>\n            <div className=\"text-ash\">{engagement.purchaseOrderRef ?? \"—\"}</div>\n          </div>\n          <div>\n            <div className=\"text-xs text-slate\">Cost center</div>\n            <div className=\"text-ash\">{engagement.costCenter ?? \"—\"}</div>\n          </div>\n        </div>\n        <div className=\"mt-4 text-xs text-slate\">\n          Any changes require a Change Request approval before scope, schedule,\n          or cost adjustments are enacted.\n        </div>\n        {engagement.invoices.length > 0 && (\n          <div className=\"mt-4 space-y-2 text-sm text-muted\">\n            {engagement.invoices.slice(0, 3).map((invoice) => (\n              <div\n                key={invoice.id}\n                className=\"rounded-xl border border-line/80 bg-ink px-4 py-3\"\n              >\n                <div className=\"text-ash\">\n                  {invoice.invoiceNumber ?? \"Invoice\"} · {invoice.currency}\n                  {invoice.amountEUR\n                    ? ` ${invoice.amountEUR.toLocaleString(\"en-GB\")}`\n                    : \"\"}\n                </div>\n                <div className=\"mt-1 text-xs text-slate\">\n                  Due {invoice.dueDate ? formatDateShort(invoice.dueDate) : \"TBD\"} ·{\" \"}\n                  {invoice.paidAt ? \"Paid\" : \"Unpaid\"}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </section>\n\n      {isStaff && (\n        <section className=\"rounded-2xl border border-line/80 bg-soft p-6\">\n          <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">\n            Engagement controls\n          </h2>\n          <form action={updateEngagement} className=\"mt-4 grid gap-4 md:grid-cols-2\">\n            <label className=\"space-y-2 text-sm text-slate\">\n              Stage\n              <select\n                name=\"stage\"\n                defaultValue={engagement.stage}\n                className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n              >\n                {stageOrder.map((stage) => (\n                  <option key={stage} value={stage}>\n                    {stageLabels[stage]}\n                  </option>\n                ))}\n              </select>\n            </label>\n            <label className=\"space-y-2 text-sm text-slate\">\n              Status\n              <select\n                name=\"status\"\n                defaultValue={engagement.status}\n                className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n              >\n                {Object.keys(statusLabels).map((status) => (\n                  <option key={status} value={status}>\n                    {statusLabels[status]}\n                  </option>\n                ))}\n              </select>\n            </label>\n            <label className=\"space-y-2 text-sm text-slate\">\n              Start date\n              <input\n                type=\"date\"\n                name=\"startDate\"\n                defaultValue={\n                  engagement.startDate\n                    ? engagement.startDate.toISOString().slice(0, 10)\n                    : \"\"\n                }\n                className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n              />\n            </label>\n            <label className=\"space-y-2 text-sm text-slate\">\n              Target date\n              <input\n                type=\"date\"\n                name=\"targetDate\"\n                defaultValue={\n                  engagement.targetDate\n                    ? engagement.targetDate.toISOString().slice(0, 10)\n                    : \"\"\n                }\n                className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n              />\n            </label>\n            <label className=\"space-y-2 text-sm text-slate\">\n              Owner\n              <select\n                name=\"ownerId\"\n                defaultValue={engagement.ownerId ?? \"\"}\n                className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n              >\n                <option value=\"\">Unassigned</option>\n                {staffUsers.map((user) => (\n                  <option key={user.id} value={user.id}>\n                    {user.email}\n                  </option>\n                ))}\n              </select>\n            </label>\n            <label className=\"space-y-2 text-sm text-slate\">\n              Procurement reference\n              <input\n                name=\"procurementRef\"\n                defaultValue={engagement.procurementRef ?? \"\"}\n                className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n                placeholder=\"PO / RFP / internal ref\"\n              />\n            </label>\n            <label className=\"space-y-2 text-sm text-slate\">\n              Purchase order\n              <input\n                name=\"purchaseOrderRef\"\n                defaultValue={engagement.purchaseOrderRef ?? \"\"}\n                className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n                placeholder=\"Client PO reference\"\n              />\n            </label>\n            <label className=\"space-y-2 text-sm text-slate\">\n              Cost center\n              <input\n                name=\"costCenter\"\n                defaultValue={engagement.costCenter ?? \"\"}\n                className=\"w-full rounded-xl border border-line bg-ink px-4 py-2 text-ash\"\n                placeholder=\"Internal cost center\"\n              />\n            </label>\n            <div className=\"flex items-end\">\n              <button\n                type=\"submit\"\n                className=\"btn-animate btn-primary rounded-full px-6 py-2 text-xs uppercase tracking-[0.2em]\"\n              >\n                Save changes\n              </button>\n            </div>\n          </form>\n        </section>\n      )}\n\n      <section className=\"rounded-2xl border border-line/80 bg-soft p-6\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">\n            Milestones\n          </h2>\n          {isStaff && (\n            <form action={createMilestone} className=\"flex flex-wrap gap-2\">\n              <input\n                name=\"title\"\n                placeholder=\"New milestone\"\n                required\n                minLength={2}\n                className=\"rounded-full border border-line bg-ink px-3 py-2 text-xs text-ash\"\n              />\n              <input\n                type=\"date\"\n                name=\"dueDate\"\n                className=\"rounded-full border border-line bg-ink px-3 py-2 text-xs text-ash\"\n              />\n              <button\n                type=\"submit\"\n                className=\"btn-animate btn-secondary rounded-full px-4 py-2 text-xs uppercase tracking-[0.2em]\"\n              >\n                Add\n              </button>\n            </form>\n          )}\n        </div>\n        {engagement.milestones.length === 0 ? (\n          <p className=\"mt-4 text-sm text-muted\">No milestones yet.</p>\n        ) : (\n          <div className=\"mt-4 space-y-3 text-sm text-muted\">\n            {engagement.milestones.map((milestone) => (\n              <div\n                key={milestone.id}\n                className=\"flex flex-col gap-2 rounded-xl border border-line/80 bg-ink px-4 py-3 md:flex-row md:items-center md:justify-between\"\n              >\n                <div>\n                  <div className=\"text-ash\">{milestone.title}</div>\n                  <div className=\"text-xs text-slate\">\n                    {milestone.dueDate\n                      ? `Due ${formatDateShort(milestone.dueDate)}`\n                      : \"No due date\"}\n                  </div>\n                </div>\n                {isStaff ? (\n                  <form action={updateMilestone} className=\"flex flex-wrap gap-2\">\n                    <input type=\"hidden\" name=\"milestoneId\" value={milestone.id} />\n                    <select\n                      name=\"status\"\n                      defaultValue={milestone.status}\n                      className=\"rounded-full border border-line bg-ink px-3 py-1 text-xs text-ash\"\n                    >\n                      {Object.keys(milestoneStatusLabels).map((status) => (\n                        <option key={status} value={status}>\n                          {milestoneStatusLabels[status]}\n                        </option>\n                      ))}\n                    </select>\n                    <input\n                      type=\"date\"\n                      name=\"dueDate\"\n                      defaultValue={\n                        milestone.dueDate\n                          ? milestone.dueDate.toISOString().slice(0, 10)\n                          : \"\"\n                      }\n                      className=\"rounded-full border border-line bg-ink px-3 py-1 text-xs text-ash\"\n                    />\n                    <button\n                      type=\"submit\"\n                      className=\"btn-animate rounded-full border border-line px-3 py-1 text-xs uppercase tracking-[0.2em] text-slate\"\n                    >\n                      Update\n                    </button>\n                  </form>\n                ) : (\n                  <span className=\"text-xs uppercase tracking-[0.2em] text-slate\">\n                    {milestoneStatusLabels[milestone.status]}\n                  </span>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </section>\n\n      <section className=\"rounded-2xl border border-line/80 bg-soft p-6\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">\n            Deliverables\n          </h2>\n          {isStaff && (\n            <form action={createDeliverable} className=\"flex flex-wrap gap-2\">\n              <input\n                name=\"title\"\n                placeholder=\"New deliverable\"\n                required\n                minLength={2}\n                className=\"rounded-full border border-line bg-ink px-3 py-2 text-xs text-ash\"\n              />\n              <button\n                type=\"submit\"\n                className=\"btn-animate btn-secondary rounded-full px-4 py-2 text-xs uppercase tracking-[0.2em]\"\n              >\n                Add\n              </button>\n            </form>\n          )}\n        </div>\n        {engagement.deliverables.length === 0 ? (\n          <p className=\"mt-4 text-sm text-muted\">No deliverables yet.</p>\n        ) : (\n          <div className=\"mt-4 space-y-3 text-sm text-muted\">\n            {engagement.deliverables.map((deliverable) => (\n              <div\n                key={deliverable.id}\n                className=\"flex flex-col gap-3 rounded-xl border border-line/80 bg-ink px-4 py-3\"\n              >\n                <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n                  <div>\n                    <div className=\"text-ash\">{deliverable.title}</div>\n                    <div className=\"text-xs text-slate\">\n                      {deliverable.document?.name ?? \"No document attached\"}\n                    </div>\n                  </div>\n                  <div className=\"text-xs uppercase tracking-[0.2em] text-slate\">\n                    {deliverableStatusLabels[deliverable.status]}\n                  </div>\n                </div>\n                {isStaff ? (\n                  <form action={updateDeliverable} className=\"flex flex-wrap gap-2\">\n                    <input type=\"hidden\" name=\"deliverableId\" value={deliverable.id} />\n                    <select\n                      name=\"status\"\n                      defaultValue={deliverable.status}\n                      className=\"rounded-full border border-line bg-ink px-3 py-1 text-xs text-ash\"\n                    >\n                      {Object.keys(deliverableStatusLabels).map((status) => (\n                        <option key={status} value={status}>\n                          {deliverableStatusLabels[status]}\n                        </option>\n                      ))}\n                    </select>\n                    <button\n                      type=\"submit\"\n                      className=\"btn-animate rounded-full border border-line px-3 py-1 text-xs uppercase tracking-[0.2em] text-slate\"\n                    >\n                      Update\n                    </button>\n                  </form>\n                ) : deliverable.status !== \"approved\" ? (\n                  <form action={approveDeliverable} className=\"flex flex-col gap-2\">\n                    <input type=\"hidden\" name=\"deliverableId\" value={deliverable.id} />\n                    <input\n                      name=\"approvalNote\"\n                      placeholder=\"Approval note (optional)\"\n                      maxLength={240}\n                      className=\"w-full rounded-full border border-line bg-ink px-3 py-1 text-xs text-ash\"\n                    />\n                    <button\n                      type=\"submit\"\n                      className=\"btn-animate btn-primary rounded-full px-4 py-2 text-xs uppercase tracking-[0.2em]\"\n                    >\n                      Approve deliverable\n                    </button>\n                  </form>\n                ) : null}\n              </div>\n            ))}\n          </div>\n        )}\n      </section>\n\n      <section className=\"rounded-2xl border border-line/80 bg-soft p-6\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">\n            Change Requests\n          </h2>\n          <Link\n            href=\"/portal/change-requests\"\n            className=\"text-xs uppercase tracking-[0.2em] text-slate\"\n          >\n            View all\n          </Link>\n        </div>\n        <form\n          action={createChangeRequest}\n          className=\"mt-4 grid gap-3 rounded-2xl border border-line/80 bg-ink/70 p-4\"\n        >\n          <div className=\"grid gap-3 md:grid-cols-2\">\n            <input\n              name=\"title\"\n              placeholder=\"Change request title\"\n              required\n              minLength={3}\n              className=\"rounded-full border border-line bg-ink px-4 py-2 text-xs text-ash\"\n            />\n            <select\n              name=\"impact\"\n              className=\"rounded-full border border-line bg-ink px-4 py-2 text-xs text-ash\"\n              defaultValue=\"scope\"\n            >\n              <option value=\"scope\">Scope</option>\n              <option value=\"schedule\">Schedule</option>\n              <option value=\"cost\">Cost</option>\n              <option value=\"risk\">Risk</option>\n            </select>\n            <select\n              name=\"severity\"\n              className=\"rounded-full border border-line bg-ink px-4 py-2 text-xs text-ash\"\n              defaultValue=\"med\"\n            >\n              <option value=\"low\">Low</option>\n              <option value=\"med\">Medium</option>\n              <option value=\"high\">High</option>\n            </select>\n          </div>\n          <textarea\n            name=\"description\"\n            rows={3}\n            required\n            minLength={10}\n            placeholder=\"Describe the change, rationale, and constraints.\"\n            className=\"rounded-2xl border border-line bg-ink px-4 py-2 text-xs text-ash\"\n          />\n          <button\n            type=\"submit\"\n            className=\"btn-animate btn-secondary w-fit rounded-full px-4 py-2 text-xs uppercase tracking-[0.2em]\"\n          >\n            Submit request\n          </button>\n        </form>\n        {engagement.changeRequests.length === 0 ? (\n          <p className=\"mt-4 text-sm text-muted\">\n            No change requests logged for this engagement.\n          </p>\n        ) : (\n          <div className=\"mt-4 space-y-3 text-sm text-muted\">\n            {engagement.changeRequests.map((request) => (\n              <div\n                key={request.id}\n                className=\"rounded-xl border border-line/80 bg-ink px-4 py-3\"\n              >\n                <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n                  <div>\n                    <div className=\"text-ash\">{request.title}</div>\n                    <div className=\"text-xs text-slate\">\n                      {changeRequestStatusLabels[request.status]} ·{\" \"}\n                      {request.impact} · {request.severity} ·{\" \"}\n                      {formatDateShort(request.requestedAt)}\n                    </div>\n                  </div>\n                  <Link\n                    href={`/portal/change-requests/${request.id}`}\n                    className=\"text-xs uppercase tracking-[0.2em] text-slate\"\n                  >\n                    Detail\n                  </Link>\n                </div>\n                {request.decisionNote && (\n                  <p className=\"mt-3 text-xs text-slate\">\n                    Decision note: {request.decisionNote}\n                  </p>\n                )}\n                {isStaff && (\n                  <form\n                    action={decideChangeRequest}\n                    className=\"mt-3 grid gap-2 md:grid-cols-3\"\n                  >\n                    <input\n                      type=\"hidden\"\n                      name=\"changeRequestId\"\n                      value={request.id}\n                    />\n                    <select\n                      name=\"status\"\n                      defaultValue={request.status}\n                      className=\"rounded-full border border-line bg-ink px-3 py-1 text-xs text-ash\"\n                    >\n                      <option value=\"approved\">Approve</option>\n                      <option value=\"rejected\">Reject</option>\n                      <option value=\"needs_info\">Needs info</option>\n                    </select>\n                    <input\n                      name=\"costDeltaEUR\"\n                      placeholder=\"Cost delta (EUR)\"\n                      className=\"rounded-full border border-line bg-ink px-3 py-1 text-xs text-ash\"\n                    />\n                    <input\n                      name=\"scheduleDeltaDays\"\n                      placeholder=\"Schedule delta (days)\"\n                      className=\"rounded-full border border-line bg-ink px-3 py-1 text-xs text-ash\"\n                    />\n                    <textarea\n                      name=\"decisionNote\"\n                      rows={2}\n                      required\n                      minLength={3}\n                      placeholder=\"Decision note\"\n                      className=\"md:col-span-3 rounded-xl border border-line bg-ink px-3 py-2 text-xs text-ash\"\n                    />\n                    <div className=\"md:col-span-3 flex flex-wrap gap-2\">\n                      <button\n                        type=\"submit\"\n                        className=\"btn-animate btn-primary rounded-full px-4 py-2 text-xs uppercase tracking-[0.2em]\"\n                      >\n                        Record decision\n                      </button>\n                      {request.status === \"approved\" && (\n                        <button\n                          formAction={implementChangeRequest}\n                          className=\"btn-animate btn-secondary rounded-full px-4 py-2 text-xs uppercase tracking-[0.2em]\"\n                        >\n                          Mark implemented\n                        </button>\n                      )}\n                    </div>\n                  </form>\n                )}\n                {!isStaff && request.status === \"needs_info\" && (\n                  <form\n                    action={respondToInfoRequest}\n                    className=\"mt-3 space-y-2\"\n                  >\n                    <input type=\"hidden\" name=\"changeRequestId\" value={request.id} />\n                    <textarea\n                      name=\"description\"\n                      required\n                      minLength={10}\n                      defaultValue={request.description}\n                      rows={3}\n                      className=\"w-full rounded-xl border border-line bg-ink px-3 py-2 text-xs text-ash\"\n                    />\n                    <button\n                      type=\"submit\"\n                      className=\"btn-animate btn-secondary rounded-full px-4 py-2 text-xs uppercase tracking-[0.2em]\"\n                    >\n                      Resubmit\n                    </button>\n                  </form>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </section>\n\n      <section className=\"rounded-2xl border border-line/80 bg-soft p-6\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-sm uppercase tracking-[0.2em] text-slate\">\n            Documents\n          </h2>\n          <Link\n            href=\"/portal/documents\"\n            className=\"text-xs uppercase tracking-[0.2em] text-slate\"\n          >\n            View all\n          </Link>\n        </div>\n        {engagement.documents.length === 0 ? (\n          <p className=\"mt-4 text-sm text-muted\">\n            No documents added yet. Upload deliverables or agreements to share\n            with the client.\n          </p>\n        ) : (\n          <div className=\"mt-4 space-y-3 text-sm text-muted\">\n            {engagement.documents.map((doc) => (\n              <div\n                key={doc.id}\n                className=\"flex flex-col gap-2 rounded-xl border border-line/80 bg-ink px-4 py-3 md:flex-row md:items-center md:justify-between\"\n              >\n                <div>\n                  <div className=\"text-ash\">{doc.label ?? doc.name}</div>\n                  <div className=\"text-xs text-slate\">\n                    {doc.category} · {formatBytes(doc.size)}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3 text-xs\">\n                  <span className=\"text-slate\">\n                    {formatDateShort(doc.createdAt)}\n                  </span>\n                  <Link\n                    href={`/api/portal/documents/${doc.id}/download`}\n                    className=\"btn-animate btn-secondary inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs uppercase tracking-[0.2em]\"\n                  >\n                    <IconStatic name=\"download\" size={16} className=\"text-ash\" />\n                    Download\n                  </Link>\n                  {session.user.role === \"lucien_admin\" && (\n                    <ArchiveDocumentButton documentId={doc.id} />\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n        <div className=\"mt-6\">\n          {isStaff ? (\n            <DocumentUploader engagementId={engagementId} />\n          ) : (\n            <DocumentUploader\n              engagementId={engagementId}\n              allowedCategories={[\"client_input\", \"evidence\"]}\n              accept=\".pdf,.docx,.png,.jpg,.jpeg\"\n            />\n          )}\n        </div>\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2757, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/.next-internal/server/app/portal/engagements/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {$$RSC_SERVER_ACTION_7 as '60115ced28d4c7eda7fe32f4f1bbb3d224b2ac5b4b'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_9 as '6041779f45fd48163aaab5b0a55feff1bfc48920ca'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_8 as '606c575b8170777a866913711cf520bcb9d0353d43'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_0 as '609ebb9eff42a3a6500609fe0fcfa03f5f96d4f3ee'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_6 as '60a969c07f9b1a27435f788968f089b01450cc018b'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_3 as '60bce6dfcb4f14c1a1bf1302508c5cd914b5dd13a6'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_4 as '60c03b9157b6eb88ff4fcc298e4161774adc86ba8a'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_2 as '60e3da173737c2359461a6f3aa17108fe00bf0f9b1'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_5 as '60eb12ac9eab39062f6f610b5ab0d56fc2042d4e6e'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_1 as '60f55428d0958048dd4c5524058c5d2afd1a5150d0'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}