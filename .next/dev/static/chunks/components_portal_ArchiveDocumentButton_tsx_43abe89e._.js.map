{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamkarllucien/Lucien_technology/lucien.technology/components/portal/ArchiveDocumentButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { Icon } from \"@/components/icons/Icon\";\n\ntype ArchiveDocumentButtonProps = {\n  documentId: string;\n};\n\nexport function ArchiveDocumentButton({ documentId }: ArchiveDocumentButtonProps) {\n  const router = useRouter();\n  const [open, setOpen] = useState(false);\n  const [reason, setReason] = useState(\"\");\n  const [status, setStatus] = useState<\"idle\" | \"loading\" | \"error\">(\"idle\");\n  const [message, setMessage] = useState<string | null>(null);\n\n  const submitArchive = async () => {\n    if (reason.trim().length < 5) {\n      setMessage(\"Provide a short reason.\");\n      setStatus(\"error\");\n      return;\n    }\n    setStatus(\"loading\");\n    setMessage(null);\n    try {\n      const response = await fetch(`/api/portal/documents/${documentId}/archive`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ reason: reason.trim() }),\n      });\n      if (!response.ok) {\n        const data = await response.json().catch(() => null);\n        setMessage(data?.error ?? \"Archive failed.\");\n        setStatus(\"error\");\n        return;\n      }\n      setOpen(false);\n      setReason(\"\");\n      setStatus(\"idle\");\n      router.refresh();\n    } catch {\n      setMessage(\"Archive failed.\");\n      setStatus(\"error\");\n    }\n  };\n\n  return (\n    <div className=\"relative\">\n      <button\n        type=\"button\"\n        onClick={() => setOpen((prev) => !prev)}\n        className=\"btn-animate btn-secondary inline-flex items-center gap-2 rounded-full px-3 py-1 text-[0.65rem] uppercase tracking-[0.2em]\"\n      >\n        <Icon name=\"archive\" size={14} strokeWidth={1.25} entrance={false} />\n        Archive\n      </button>\n      {open && (\n        <div className=\"absolute right-0 top-9 z-20 w-64 rounded-xl border border-line/80 bg-ink p-3 text-xs text-muted shadow-lg\">\n          <div className=\"space-y-2\">\n            <div className=\"text-[0.6rem] uppercase tracking-[0.2em] text-slate\">\n              Archive reason\n            </div>\n            <textarea\n              value={reason}\n              onChange={(event) => setReason(event.target.value)}\n              rows={3}\n              className=\"w-full rounded-lg border border-line bg-ink px-2 py-1 text-ash\"\n              placeholder=\"Why is this document archived?\"\n            />\n            {message && <p className=\"text-[#E5A4A4]\">{message}</p>}\n            <button\n              type=\"button\"\n              onClick={submitArchive}\n              disabled={status === \"loading\"}\n              className=\"btn-animate btn-primary inline-flex w-full items-center justify-center gap-2 rounded-full px-3 py-1 text-[0.65rem] uppercase tracking-[0.2em]\"\n            >\n              <Icon\n                name=\"archive\"\n                size={14}\n                strokeWidth={1.25}\n                entrance={false}\n              />\n              {status === \"loading\" ? \"Archiving\" : \"Confirm archive\"}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAUO,SAAS,sBAAsB,EAAE,UAAU,EAA8B;;IAC9E,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAA+B;IACnE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB;IAEtD,MAAM,gBAAgB;QACpB,IAAI,OAAO,IAAI,GAAG,MAAM,GAAG,GAAG;YAC5B,WAAW;YACX,UAAU;YACV;QACF;QACA,UAAU;QACV,WAAW;QACX,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,sBAAsB,EAAE,WAAW,QAAQ,CAAC,EAAE;gBAC1E,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,QAAQ,OAAO,IAAI;gBAAG;YAC/C;YACA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,OAAO,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;gBAC/C,WAAW,MAAM,SAAS;gBAC1B,UAAU;gBACV;YACF;YACA,QAAQ;YACR,UAAU;YACV,UAAU;YACV,OAAO,OAAO;QAChB,EAAE,OAAM;YACN,WAAW;YACX,UAAU;QACZ;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,MAAK;gBACL,SAAS,IAAM,QAAQ,CAAC,OAAS,CAAC;gBAClC,WAAU;;kCAEV,6LAAC,uIAAI;wBAAC,MAAK;wBAAU,MAAM;wBAAI,aAAa;wBAAM,UAAU;;;;;;oBAAS;;;;;;;YAGtE,sBACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCAAsD;;;;;;sCAGrE,6LAAC;4BACC,OAAO;4BACP,UAAU,CAAC,QAAU,UAAU,MAAM,MAAM,CAAC,KAAK;4BACjD,MAAM;4BACN,WAAU;4BACV,aAAY;;;;;;wBAEb,yBAAW,6LAAC;4BAAE,WAAU;sCAAkB;;;;;;sCAC3C,6LAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU,WAAW;4BACrB,WAAU;;8CAEV,6LAAC,uIAAI;oCACH,MAAK;oCACL,MAAM;oCACN,aAAa;oCACb,UAAU;;;;;;gCAEX,WAAW,YAAY,cAAc;;;;;;;;;;;;;;;;;;;;;;;;AAOpD;GAhFgB;;QACC,kJAAS;;;KADV"}}]
}